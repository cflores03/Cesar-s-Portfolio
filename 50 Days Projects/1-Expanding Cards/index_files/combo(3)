!function(s,u){"use strict";var o=s.YAHOO=s.YAHOO||{},n=o.NB||{},a=o.SP=o.SP||{},i="rs-",l={offset:"-o",index:"-i"},e="#main-algo",t=".grp-talgo",g=".grp-talgo-ext .compList .s-sitelink",c=".rs-section",r=".rs-row",h=".rs-block",d=".rs-label",S=".rs-bp",v=/\brs-bp\b/g,f=".rs-right",p=".grp-talgo-ext",A=".algo",m=".ads.AdTop",y=".compText",C=".qlset",R="NavigationCard",E="rs-hidden",I="trans-in",N="trans-out",b={BEACON:{standard:{_S:"",pvid:"",mtestid:"",sec:"rel-algo",it:"sys_algo_rs",prd:"rs_algo"},northAdsRS:{it:"sys_ads_rs"},close:{pos:"",t4pos:"0"},click:{pos:"",t4pos:""},view:{rs:0,pos:""}}},B="offset",q="hashKey",O="relItems",x="itemProviders",k="inPlaceRSNodes";function _(){}_.ATTRS={itemPerRow:{value:2},baseRequeryUrl:{value:""},isControl:{value:!1},showAlgoDesc:{value:!1},instrumentation:{value:{}},action:{value:"touchstart"},defaultAlgoGroup:{value:p},algoMain:{value:e},algoLink:{value:t},algoItem:{value:A},adNorthItem:{value:m},rsItem:{value:r},enableRSOnLoadAlgoIdx:{value:!1}},_.prototype={initializer:function(){var t,e,r=this,o=r.get("enableRSOnLoadAlgoIdx"),n=u.querySelectorAll(r.get("adNorthItem"));r.get(k)&&(t=[],(e=u.querySelectorAll(r.get("algoItem")+" "+c))&&(e.forEach(function(e){e=e.querySelectorAll(d).length;e&&t.push(Array(e).fill(e))}),t.length&&r.set(O,t))),r.isSessionStorageSupport()&&r.has(O)&&r.has(q)&&!isNaN(r.get(B))&&(r.triggeredIdx=Array(r.get(O).length),r.upToDate=!1,r.updateBeaconsObj(),r.bindRelatedSearchesListener(),r.bindAlgoEvtHandling(),o&&(n=parseInt(o)+n.length,r.updateSessionStorage({offset:r.get(B),index:n})),r.triggerRelatedSearches())},isSessionStorageSupport:function(){try{return!!s.sessionStorage}catch(e){return!1}},isHistorySupport:function(){return!(!s.history||!s.history.replaceState)},updateBeaconsObj:function(){b.BEACON.standard._S=a.ULT.get("spaceid"),b.BEACON.standard.pvid=a.ULT.get("pvid"),b.BEACON.standard.mtestid=encodeURIComponent(a.ULT.get("mtestid"));var e=this.get("instrumentation");e.it&&(b.BEACON.standard.it=e.it),e.sec&&(b.BEACON.standard.sec=e.sec)},bindRelatedSearchesListener:function(){var e=this,t=e.triggerRelatedSearches.bind(e);o.Event.listen(s,"pageshow",function(){t()}),o.Event.listen(s,"load",function(){t()}),o.Event.listen(u,"visibilitychange",function(){"visible"===u.visibilityState&&t()}),e.isHistorySupport()&&o.Event.listen(s,"popstate",function(){t()})},bindAlgoEvtHandling:function(){var e=this,t=e.get("action"),r=u.querySelector(e.get("algoMain"));r&&(o.Event.delegate(t,e._evtAlgoLinkClk,r,e.get("algoLink"),e),o.Event.delegate(t,e._evtAlgoLinkClk,r,g,e),o.Event.delegate("click",e._evtRelatedSearchClk,r,h,e),e.get("isControl")||o.Event.delegate("click",e._evtCloseClicked,r,f,e))},replaceHistoryStateIfNecessary:function(){this.isHistorySupport()&&(s.history.state||s.history.replaceState({},null))},triggerRelatedSearches:function(){var e,t,r,o=this;o.upToDate||(e=o.getSessionStorageValidated(),o.recoverHiddenAlgoContent(),e&&!e.shown&&o.updateRelatedSearchUI(e.index)&&(r=parseInt(e.index),"object"==typeof(t=o.get(O))[r]&&o.sendRsViewBeacon({pos:r+1,rs:t[r].length,query:encodeURIComponent(o.get("query"))}),o.upToDate=!0,e.shown=!0,o.updateSessionStorage(e)))},recoverHiddenAlgoContent:function(){var e,t;this.get("isControl")||(e=u.querySelectorAll(c),t=u.querySelectorAll("."+E),e&&(n.removeClass(e,N),n.removeClass(e,I)),t&&n.removeClass(t,E))},createRelatedSearchNode:function(e){var t,r,o,n,s,a=this,i=u.querySelector(S),l=a.get("itemPerRow"),g=a.get(O)[e],c=a.getProviders(e),d=!1;if(!i||g===undefined||0==g.length)return null;for(t=(e=i.cloneNode(!0)).querySelectorAll(a.get("rsItem")),i=Math.min(t.length,Math.floor(g.length/l)),c.length===g.length&&(d=!0),g.length=Math.min(g.length,i*l),o=i;o<t.length;o++)t[o].remove();for(r=e.querySelectorAll(h+" a"),o=0;o<g.length;o++)n=r[o],s=g[o],n.innerHTML=s,s=d?a.appendFr2Category(c[o]):a.get("baseRequeryUrl"),n.href=s+"&p="+encodeURIComponent(n.text);return e.className=e.className.replace(v,""),e},createRelatedSearchNodeForAlgo:function(e){var t,r=this,o=r.getKthAlgoElement(e);if(!r.get(k)&&r.shouldCreateRsNode(e)){if(!(t=r.createRelatedSearchNode(e)))return!1;o.appendChild(t),r.triggeredIdx[e]=!0}return!0},appendFr2Category:function(e){var t=this.get("baseRequeryUrl"),r=new RegExp("[\\?&]fr2=([^&#]*)").exec(t);return e=e?encodeURIComponent(",ct:"+e):"",null===r?t:t.replace(r[1],r[1]+e)},getProviders:function(e){var t=this.get(x);return Array.isArray(t)&&t[e]!==undefined?t[e]:[]},shouldCreateRsNode:function(e){return e<this.get(O).length&&!this.triggeredIdx[e]},updateRelatedSearchUI:function(e){var t,r=this,o=r.getKthAlgoElement(e);return!!(o&&r.createRelatedSearchNodeForAlgo(e)&&(t=o.querySelector(c)))&&(r.get("isControl")||(n.removeClass(t,N),n.addClass(t,I),n.hasClass(o,R)?((t=o.querySelector(y))&&n.addClass(t,E),(t=o.querySelectorAll(C))&&n.addClass(t,E)):(o=o.querySelectorAll(r.get("defaultAlgoGroup")))&&!r.get("showAlgoDesc")&&n.addClass(o,E)),!0)},getAlgoElements:function(){return this.algoEls===undefined&&(this.algoEls=u.querySelectorAll(this.get("algoItem"))),this.algoEls},getKthAlgoElement:function(e){var t=this.getAlgoElements();return e<t.length?t[e]:null},getSessionStorageValidated:function(){var e=this.getSessionStorage();return e.offset==this.get(B)?e:null},updateSessionStorage:function(e){var t,r,o=this.get(q);if(s.sessionStorage)for(r in t=i+o,l)r in e&&s.sessionStorage.setItem(t+l[r],e[r])},getSessionStorage:function(){var e,t,r,o={},n=this.get(q);if(s.sessionStorage)for(t in e=i+n,l)(r=s.sessionStorage.getItem(e+l[t]))&&(o[t]=r);return o},removeSessionStorage:function(){var e,t,r=this.get(q);if(s.sessionStorage)for(t in e=i+r,l)s.sessionStorage.removeItem(e+l[t])},sendRsClickBeacon:function(e,t){var r=-1;if("object"==typeof e){for(var o in e)b.BEACON.click[o]=e[o];r=e.pos-1}r=this.setBeaconData(r);n.merge(r,b.BEACON.click),this._sendBeacon(r,!1,function(){s.location.href=t},500)},sendRsCloseBeacon:function(e){var t=-1;if(0<Object.keys(e).length){for(var r in e)b.BEACON.close[r]=e[r];t=e.pos-1}t=this.setBeaconData(t);n.merge(t,b.BEACON.close),this._sendBeacon(t,!1)},sendRsViewBeacon:function(e){var t=-1;if(0<Object.keys(e).length){for(var r in e)b.BEACON.view[r]=e[r];t=e.pos-1}t=this.setBeaconData(t);n.merge(t,b.BEACON.view),this._sendBeacon(t,!0)},setBeaconData:function(e){var t=u.querySelectorAll(this.get("adNorthItem")+this.get("algoItem")),r=n.clone(b.BEACON.standard);return-1<e&&e<t.length&&n.merge(r,b.BEACON.northAdsRS),r},_evtCloseClicked:function(e){var t,r=this.getSessionStorage();e.stopPropagation(),0<Object.keys(r).length&&(this.sendRsCloseBeacon({pos:parseInt(r.index)+1,query:this.get("query")}),this.removeSessionStorage(),(t=o.DOM.ancestor(e.currentTarget,c))&&(n.removeClass(t,I),n.addClass(t,N),e=(r=o.DOM.ancestor(t,this.get("algoItem"),!0)).querySelectorAll(this.get("defaultAlgoGroup")),t=r.querySelector(y),r=r.querySelectorAll(C),e&&n.removeClass(e,E),t&&n.removeClass(t,E),r&&n.removeClass(r,E)))},_evtRelatedSearchClk:function(e){e.preventDefault(),e.stopPropagation();var t=this,r=e.currentTarget.querySelector(d),o=r.innerText||"",n=r.getAttribute("data-index")||-1,s=e.currentTarget.querySelector("a"),a=s?s.getAttribute("href"):"",s=t.get(x)||[],r=r.getAttribute("data-labelsrc"),e=t._getAlgoIndex(e);-1!==e&&-1!==n&&""!==o&&""!==a&&(o={pos:e+1,t4pos:n,ltxt:o,query:t.get("query")},t.get(O).length===s.length?(o.trigSrc=s[e][n-1],o["ltxt-cat"]=s[e][n-1]):r&&(o.trigSrc=r,o["ltxt-cat"]=r),t.sendRsClickBeacon(o,a))},_evtAlgoLinkClk:function(e){var t=this,e=t._getAlgoIndex(e);0<=e&&(t.replaceHistoryStateIfNecessary(),t.updateSessionStorage({offset:t.get(B),index:e}),t.upToDate=!1)},_getAlgoIndex:function(e){var t=-1,r=this.getAlgoElements();return r&&(e=o.DOM.ancestor(e.currentTarget,this.get("algoItem"),!0),t=o.DOM.indexOf(e,r)),t},_sendBeacon:function(e,t,r,o){t?a.ULT.view_beacon(e):a.ULT.beacon(e,r,o)}},a.AlgoRsItem=_}(window,document);!function(e,c){"use strict";var d=e.YAHOO=e.YAHOO||{},n=d.NB||{},e=d.SP=d.SP||{};function s(){}s.prototype={initializer:function(){var e=this,s=e.get("config");s.triggerClass&&(e.config=s,e.trigSelector="."+s.triggerClass,e.trigGroupSelector="#"+s.triggerGroup,e.listSelector="."+s.listClass,e.moduleSelector="."+s.moduleClass,e.xOffset=s.xOffset?parseInt(s.xOffset):0,e.yOffset=s.yOffset?parseInt(s.yOffset):0,e.gridLeftGutter=s.gridLeftGutter?parseInt(s.gridLeftGutter):124,e.selectedClass=s.selectedClass||"OptSelected",e.hideClass=s.hideClass||"d-n",e.posAbs=s.posAbsClass||"p-a",e.posRelClass=s.posRelClass||"p-r",d.Event.delegate("click",e.handleClickEvent,c.querySelector(e.trigGroupSelector),e.moduleSelector+" "+e.trigSelector,e),d.Event.outside("click",e.handleClickOutside.bind(e),e.checkInside.bind(e)))},checkInside:function(e){return n.hasClass(e,this.config.triggerClass)||n.hasClass(e,this.config.listClass)},handleClickEvent:function(e){var s,t,l,i=this,r=e.target,o=c.querySelector("."+i.selectedClass),a=d.DOM.ancestor(r,i.moduleSelector),e=!1;o&&(e=a.contains(o),i.hide(o),e)||(s=a.querySelector(i.listSelector),n.addClass(s,i.posAbs),n.addClass(a,i.posRelClass),i.get("posToHost")?(t=d.DOM.getX(r)-d.DOM.getX(a)+i.xOffset,l=d.DOM.getY(r)-d.DOM.getY(a)+i.yOffset,d.DOM.setX(s,t),d.DOM.setY(s,l)):(l=c.querySelector(i.trigGroupSelector),t=d.DOM.getX(r)-i.yOffset,0==d.DOM.getComputed(l,"marginLeft")&&(t+=i.gridLeftGutter),d.DOM.setX(s,t)),n.hasClass(s,i.hideClass)&&i.show(s))},handleClickOutside:function(){var e=this,s=c.querySelector(e.listSelector+"."+e.selectedClass);s&&e.hide(s)},show:function(e){n.removeClass(e,this.hideClass),n.addClass(e,this.selectedClass)},hide:function(e){n.addClass(e,this.hideClass),n.removeClass(e,this.selectedClass)}},e.compModuleDropDown=s}(window,document);!function(r,a){"use strict";var i=r.YAHOO=r.YAHOO||{},t=i.SP=i.SP||{};function e(){}e.ATTRS={target:{value:"_top"},pageHostname:{value:null}},e.prototype={initializer:function(){var t=this,e=i.Event,n=t.handleClick.bind(t);t.has("target")&&e.delegate("mousedown",n,a,"a")},handleClick:function(t){var e=this,n=t.currentTarget,a=n&&n.getAttribute("href"),t=a&&e.getAnchor(a),a=t&&t.hostname,t=e.get("pageHostname")||r.location.hostname;!a||a!=="r."+t&&a.substr(-t.length)===t||n.setAttribute("target",e.get("target"))},getAnchor:function(t){var e=a.createElement("a");return e.href=t,e}},t.YHSLinkManipulator=e}(window,document);